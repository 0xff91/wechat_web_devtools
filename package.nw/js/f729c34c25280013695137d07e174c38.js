'use strict';!function(require,directRequire){const a=require('path'),b=require('./0634ee2ebd3e560d9d4804ecc960160f.js'),c=require('./3bfffbe88b3d923921f851c0697974fe.js'),d=require('./84b183688a46c9e2626d3e6f83365e13.js'),e=require('./56c390e04c10e91a4aa2a2c19d9a885d.js'),f=require('./a1dd553cc059d528bb0ef56afed53968.js');let g=1;module.exports={createLoadSubPackageTask:async function(a,h,i){const j=i(),k=j.simulator.appConfig,l=k&&k.subPackages;let m=h.args.moduleName,n=!1;if(`/${e.MINI_PROGRAM_MAIN_PACKAGE_ROOT}/`===m?(m=e.MINI_PROGRAM_MAIN_PACKAGE_ROOT,n=!0):l.forEach((a)=>{let b=a.root;/\.js$/.test(a.root)||(b=d.normalizePath('/'+a.root+'/')),b==m&&(n=!0)}),!n)return{errMsg:`${h.api}:fail module not found`};if(c.isGameApp())a({type:b.SIMULATOR_LOAD_GAME_SUBPACKAGE,data:{root:m,taskId:g}});else{const c=m.replace(/^\//,'');if(j.simulator.subPackageLoaded[c]&&j.simulator.subPackageLoaded[c].loaded){const a=function(a,b){f.triggerOnEvent({eventName:'onLoadSubPackageTaskStateChange',data:{state:'success',taskId:a,moduleName:b}})}.bind(null,g,c);setTimeout(a)}else a({type:b.SIMULATOR_LOAD_SUBPACKAGE,data:{loaded:!1,taskId:g,root:c}})}return{loadTaskId:g++,errMsg:`${h.api}:ok`}}}}(require('lazyload'),require);